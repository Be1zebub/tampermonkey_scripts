// ==UserScript==
// @name         Github file download button
// @namespace    https://github.com/
// @version      0.1
// @description  Github file download button
// @author       Beelzebub
// @match        https://github.com/*/*
// @exclude      *~edit
// @icon         https://github.githubassets.com/favicons/favicon-dark.png
// @grant       GM_addScript
// ==/UserScript==

!function(){"use strict";function t(){var t=document.getElementById("raw-url");if(null!=t){var e=t.parentElement,n=t.getAttribute("href"),d=n.substring(n.lastIndexOf("/")+1),o=e.Add("a");o.AddClass("btn-sm"),o.AddClass("btn"),o.AddClass("BtnGroup-item"),o.setAttribute("data-view-component",!0),o.setAttribute("role","button"),o.setAttribute("href",n),o.innerHTML="Download",o.addEventListener("click",function(t){t.preventDefault(),function(t,e,n="text/plain"){const d=document.createElement("a");d.style.display="none",document.body.appendChild(d),d.href=window.URL.createObjectURL(new Blob([t],{type:n})),d.setAttribute("download",e),d.click(),window.URL.revokeObjectURL(d.href),document.body.removeChild(d)}(n,d)})}}HTMLElement.prototype.Add=function(t,e){var n=document.createElement(t);return e&&(n.className=e),this.append(n),n},HTMLElement.prototype.AddClass=function(t){this.classList.add(t)},t(),document.addEventListener("pjax:end",t)}();
